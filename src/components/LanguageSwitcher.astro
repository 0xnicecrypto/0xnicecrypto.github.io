---
const currentPath = Astro.url.pathname;
const currentLocale = Astro.currentLocale || 'en';

// Determine the alternate language URL
function getAlternateUrl() {
  if (currentLocale === 'en') {
    // Current is English, go to Chinese
    if (currentPath === '/') return '/zh';
    return `/zh${currentPath}`;
  } else {
    // Current is Chinese, go to English
    return currentPath.replace(/^\/zh/, '') || '/';
  }
}

const alternateUrl = getAlternateUrl();
const alternateLabel = currentLocale === 'en' ? '中文' : 'English';
---

<div class="language-switcher">
  <a href={alternateUrl} class="lang-link" title={`Switch to ${alternateLabel}`}>
    [{alternateLabel}]
  </a>
</div>

<style>
  .language-switcher {
    display: inline-flex;
    align-items: center;
  }
  
  .lang-link {
    color: var(--accent);
    text-decoration: none;
    font-size: 0.9rem;
    font-weight: 500;
    transition: opacity 0.2s;
  }
  
  .lang-link:hover {
    opacity: 0.8;
  }
</style>
